---
/**
 * Page Layout - Online Nexus Marketing
 * 
 * Standard page layout with header and footer
 */

import BaseLayout from './BaseLayout.astro';
import Header from '@/components/global/Header.astro';
import Footer from '@/components/global/Footer.astro';
import { getNavigation, getGlobalSettings } from '@/lib/contentful';

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  noIndex?: boolean;
  canonicalUrl?: string;
  transparentHeader?: boolean;
}

const {
  title,
  description,
  image,
  noIndex,
  canonicalUrl,
  transparentHeader = false,
} = Astro.props;

// Fetch global data
const [navigation, settings] = await Promise.all([
  getNavigation(),
  getGlobalSettings(),
]);
---

<BaseLayout
  title={title}
  description={description}
  image={image}
  noIndex={noIndex}
  canonicalUrl={canonicalUrl}
>
  <Header
    navigation={navigation}
    transparent={transparentHeader}
  />
  
  <main>
    <slot />
  </main>
  
  <Footer
    navigation={navigation}
    settings={settings}
  />
</BaseLayout>
