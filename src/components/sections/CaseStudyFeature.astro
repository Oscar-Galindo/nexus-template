---
/**
 * Case Study Feature Section - Online Nexus Marketing
 * 
 * Highlight a featured case study
 */

import Container from '@/components/ui/Container.astro';
import Button from '@/components/ui/Button.astro';
import Badge from '@/components/ui/Badge.astro';
import Image from '@/components/ui/Image.astro';
import Icon from '@/components/ui/Icon.astro';
import type { ContentBlock } from '@/lib/contentful';

export interface Props extends Partial<ContentBlock> {
  class?: string;
}

const {
  title,
  description,
  image,
  items = [], // Array of results
  ctaText = 'Read Case Study',
  ctaUrl = '/case-studies',
  class: className = '',
} = Astro.props;
---

{title && (
  <section
    class:list={[
      'bg-neutral-50 py-16 md:py-24 lg:py-32',
      className
    ]}
  >
    <Container>
      <!-- Grid Layout -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16 items-center">
        
        <!-- Image Side -->
        {image && (
          <div class="relative rounded-2xl overflow-hidden shadow-xl aspect-[4/3]">
            <Image
              src={`https:${image.fields?.file?.url}`}
              alt={title}
              preset="hero"
              width={800}
              class="w-full h-full object-cover"
            />
          </div>
        )}

        <!-- Content Side -->
        <div>
          <!-- Label -->
          <Badge variant="primary" class="mb-4">
            Featured Case Study
          </Badge>

          <!-- Title -->
          <h2 class="heading-3 mb-4">
            {title}
          </h2>

          <!-- Description -->
          {description && (
            <p class="body-lg mb-6">
              {description}
            </p>
          )}

          <!-- Results List -->
          {items.length > 0 && (
            <ul class="space-y-3 mb-8">
              {items.map((item: any) => (
                <li class="flex items-center gap-3">
                  <div class="w-6 h-6 bg-accent-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <Icon name="check" size="sm" class="text-accent-600" />
                  </div>
                  <span class="font-medium">
                    {item.text || item}
                  </span>
                </li>
              ))}
            </ul>
          )}

          <!-- CTA -->
          <Button
            variant="primary"
            href={ctaUrl}
            icon="arrow-right"
          >
            {ctaText}
          </Button>
        </div>
      </div>
    </Container>
  </section>
)}
